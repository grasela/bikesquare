<%= form_with(model: profile, local: true) do |form| %>
    <% if profile.errors.any? %>
        <div id="error_explanation">
            <h2><%= pluralize(profile.errors.count, "error") %> prohibited this profile from being saved:</h2>

            <ul>
                <% profile.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                <% end %>
            </ul>
        </div>
    <% end %>

    <div class="field">
        <p>   <%= form.label :first_name %></p>
        <%= form.text_field :first_name, id: :profile_first_name, required: true %>
    </div>

    <div class="field">
<p>        <%= form.label :last_name %></p>
        <%= form.text_field :last_name, id: :profile_last_name, required: true %>
    </div>

    <div class="field">
        <% if profile.avatar_data.present? %>
            <div class="avatar">  <%= image_tag profile.avatar_url(:small) %></div>
    <% end %>
        <% form.hidden_field :image, value: profile.cached_avatar_data %>
   <p>     <%= form.label :avatar %></p>
        <%= form.file_field :avatar, id: :profile_avatar_data %>
    </div>

    <div class="field">
     <p>   <%= form.label :username %></p>
        <%= form.text_field :username, id: :profile_username, required: true %>
    </div>

    <div class="field">
        <p>  <%= form.label :user_id %></p>
        <%= form.hidden_field :user_id, value:  current_user.id, id: :profile_user_id, required: true  %>
    </div>

    <div class="actions">
        <%= form.submit "update profile", class: "submit-button" %>
    </div>
<% end %>
